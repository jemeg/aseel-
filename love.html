<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
	<title>اتفاقية الزواج اللطيفة</title>
	<style>
		:root {
			--bg: #0f172a;
			/* slate-900 */
			--card: #111827;
			/* gray-900 */
			--soft: #1f2937;
			/* gray-800 */
			--text: #e5e7eb;
			/* gray-200 */
			--muted: #9ca3af;
			/* gray-400 */
			--accent: #22d3ee;
			/* cyan-400 */
			--accent-2: #a78bfa;
			/* violet-400 */
			--success: #34d399;
			/* emerald-400 */
			--danger: #f472b6;
			/* pink-400 */
			--shadow: 0 20px 60px rgba(0, 0, 0, .35);
			--radius: 22px;
		}

		* {
			box-sizing: border-box;
		}

		html,
		body {
			height: 100%;
		}

		body {
			margin: 0;
			padding: 0;
			background: radial-gradient(1200px 600px at 80% -10%, rgba(34, 211, 238, .15), transparent 60%),
				radial-gradient(1000px 500px at -20% 110%, rgba(167, 139, 250, .12), transparent 60%),
				var(--bg);
			font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Kufi Arabic", "Noto Sans Arabic", Tahoma, Arial, sans-serif;
			color: var(--text);
			-webkit-tap-highlight-color: transparent;
		}

		.wrap {
			min-height: 100%;
			display: grid;
			place-items: center;
			padding: 24px;
		}

		.card {
			width: 100%;
			max-width: 480px;
			background: linear-gradient(180deg, rgba(255, 255, 255, .04), rgba(255, 255, 255, .02));
			border: 1px solid rgba(255, 255, 255, .08);
			border-radius: var(--radius);
			box-shadow: var(--shadow);
			overflow: hidden;
		}

		.section {
			display: none;
		}

		.section.active {
			display: block;
		}

		.header {
			padding: 22px 22px 0;
			display: flex;
			align-items: center;
			justify-content: space-between;
		}

		.badge {
			font-size: 12px;
			color: var(--bg);
			background: linear-gradient(90deg, var(--accent), var(--accent-2));
			padding: 4px 10px;
			border-radius: 999px;
			font-weight: 700;
		}

		.content {
			padding: 20px 22px 22px;
		}

		.title {
			font-size: 22px;
			font-weight: 800;
			margin: 6px 0 12px;
			letter-spacing: .3px;
		}

		.muted {
			color: var(--muted);
			line-height: 1.8;
		}

		.terms-box {
			background: rgba(255, 255, 255, .03);
			border: 1px solid rgba(255, 255, 255, .06);
			border-radius: 16px;
			padding: 14px;
			max-height: 220px;
			overflow: auto;
		}

		.actions {
			display: grid;
			gap: 10px;
			margin-top: 16px;
		}

		button {
			appearance: none;
			border: 0;
			outline: 0;
			cursor: pointer;
			font-weight: 800;
			letter-spacing: .3px;
			padding: 14px 16px;
			border-radius: 16px;
			color: #0b1220;
			background: linear-gradient(90deg, var(--accent), var(--accent-2));
			box-shadow: 0 12px 30px rgba(34, 211, 238, .25), 0 8px 20px rgba(167, 139, 250, .18);
		}

		button[disabled] {
			opacity: .6;
			filter: grayscale(30%);
			cursor: not-allowed;
		}

		.check {
			display: flex;
			gap: 10px;
			align-items: flex-start;
			font-size: 14px;
			color: var(--text);
		}

		.check input {
			inline-size: 22px;
			block-size: 22px;
			accent-color: #22d3ee;
		}

		/* Fingerprint screen */
		.fp-wrap {
			display: grid;
			place-items: center;
			padding: 26px;
			text-align: center;
		}

		.fp-area {
			width: 220px;
			aspect-ratio: 1;
			border-radius: 30px;
			padding: 16px;
			background: linear-gradient(180deg, rgba(255, 255, 255, .04), rgba(255, 255, 255, .02));
			border: 1px solid rgba(255, 255, 255, .07);
			position: relative;
		}

		.ring {
			position: absolute;
			inset: -10px;
			border-radius: 38px;
			background:
				conic-gradient(var(--accent) var(--p, 0%), rgba(255, 255, 255, .06) 0 100%);
			mask: radial-gradient(closest-side, transparent calc(100% - 14px), #000 calc(100% - 13px));
			transition: --p .1s linear;
		}

		.fp {
			width: 100%;
			height: 100%;
			display: grid;
			place-items: center;
			background: rgba(255, 255, 255, .02);
			border-radius: 22px;
			position: relative;
			overflow: hidden;
		}

		.fp svg {
			width: 80%;
			opacity: .9;
		}

		.scanner {
			position: absolute;
			left: 0;
			right: 0;
			height: 4px;
			background: linear-gradient(90deg, var(--accent), var(--accent-2));
			top: var(--y, -8%);
			box-shadow: 0 0 18px rgba(34, 211, 238, .5);
			transition: top .5s ease;
		}

		.hint {
			margin-top: 16px;
			color: var(--muted);
			font-size: 15px;
		}

		.hold-btn {
			margin-top: 14px;
			font-weight: 900;
		}

		/* Success screen */
		.center {
			text-align: center;
			padding: 36px 22px 30px;
		}

		.big {
			font-size: 28px;
			font-weight: 900;
			line-height: 1.4;
		}

		.heart {
			font-size: 46px;
			display: inline-block;
			filter: drop-shadow(0 10px 20px rgba(255, 71, 143, .35));
		}

		/* Confetti */
		.confetti {
			position: fixed;
			inset: 0;
			pointer-events: none;
			overflow: hidden;
		}

		.piece {
			position: absolute;
			width: 10px;
			height: 14px;
			opacity: .9;
			will-change: transform;
			border-radius: 2px;
		}

		/* Small screens fine-tuning */
		@media (max-width: 360px) {
			.title {
				font-size: 20px;
			}

			.fp-area {
				width: 200px;
			}
		}
	</style>
</head>

<body>
	<div class="wrap">
		<div class="card">

			<!-- Section 1: Terms / Consent -->
			<section id="s1" class="section active" aria-labelledby="t1">
				<div class="header">
					<span class="badge">💜هلا حبيبتي 💖</span>
					<span class="badge">💝أنحبك💘</span>
					<small class="muted"> حبيبتي اسولتي</small>
				</div>
				<div class="content">
					<h1 id="t1" class="title">اتفاقية الزواج 🤍</h1>
					<div class="terms-box" role="region" aria-label="نص الاتفاقية">
						<p class="muted">
							بفتح هذا الموقع، يُعرض عليكِ اتفاق بسيط وجميل: عند الضغط على الزر أدناه فأنتِي
							<strong> توافقين</strong> على أنكِ ترغبين في الزواج مني 🤍.
							
						</p>
						<ul class="muted">
							<li> توجد التزامات قانونية — مجرد الموافقه فأنتي ملكي فقط.</li>
							<li>بعد الموافقة سنطلب "بصمة" رمزية منك.</li>
							<li>ثم ستظهر رسالة تهنئة خاصة لك.</li>
						</ul>
					</div>

					<label class="check" for="agree">
						<input id="agree" type="checkbox" />
						<span>أُقرّ بأني قرأت الكلام الجميل وأوافق على الشروط اللطيفة المذكورة أعلاه.</span>
					</label>

					<div class="actions">
						<button id="agreeBtn" disabled aria-disabled="true">أوافق على الشروط</button>
					</div>
				</div>
			</section>

			<!-- Section 2: Fingerprint -->
			<section id="s2" class="section" aria-labelledby="t2">
				<div class="fp-wrap">
					<div class="fp-area" id="fpArea" aria-label="منطقة البصمة" role="button" tabindex="0">
						<div class="ring" id="ring"></div>
						<div class="fp" id="fp">
							<svg viewBox="0 0 512 512" aria-hidden="true">
								<path fill="none" stroke="url(#g)" stroke-width="12" stroke-linecap="round"
									stroke-linejoin="round"
									d="M256 64c-79.5 0-144 64.5-144 144 0 38.6 13.6 71.9 36.1 97.6 3.5 4 3.1 10.1-.9 13.6-4 3.5-10.1 3.1-13.6-.9C106.9 288.5 92 253.2 92 208 92 116.5 164.5 44 256 44s164 72.5 164 164c0 84.9-51.4 143.8-81.7 253.2-1.6 5.9-7.6 9.4-13.5 7.7-5.9-1.6-9.4-7.6-7.7-13.5C337.8 315.9 400 261.6 400 208 400 128.5 335.5 64 256 64zm0 64c-44.1 0-80 35.9-80 80 0 24.3 10.7 46 27.7 60.8 4.1 3.5 4.7 9.6 1.2 13.7-3.5 4.1-9.6 4.7-13.7 1.2C170 269.8 156 240.8 156 208c0-55.2 44.8-100 100-100s100 44.8 100 100c0 52.7-41.2 84.5-77.8 185.3-1.9 5.5-7.9 8.4-13.4 6.5-5.5-1.9-8.4-7.9-6.5-13.4C285.6 287.1 320 250.7 320 208c0-35.3-28.7-64-64-64zm0 64c-8.8 0-16 7.2-16 16 0 11.2 5.5 21.1 13.9 27.2 4.4 3.3 5.3 9.6 2 14-3.3 4.4-9.6 5.3-14 2C228.4 241.9 216 220.5 216 192c0-22.1 17.9-40 40-40s40 17.9 40 40c0 13.9-5.9 26.3-15.4 34.9-4.1 3.6-10.4 3.2-14.1-.9-3.6-4.1-3.2-10.4.9-14.1 6.1-5.4 9.6-13.1 9.6-19.9 0-11-9-20-20-20z" />
								<defs>
									<linearGradient id="g" x1="0" x2="1">
										<stop offset="0" stop-color="#22d3ee" />
										<stop offset="1" stop-color="#a78bfa" />
									</linearGradient>
								</defs>
							</svg>
							<div class="scanner" id="scanner"></div>
						</div>
					</div>
					<p class="hint">ضعي إصبعك هنا و<b>استمري بالضغط لمدة ثانيتين</b> لوضع بصمتك الرمزية 💗</p>
					<button class="hold-btn" id="altBtn" aria-label="زر بديل إذا تعذر اللمس"> اضغطي هنا لوضع
						البصمة</button>
				</div>
			</section>

			<!-- Section 3: Success / Congrats -->
			<section id="s3" class="section" aria-labelledby="t3">
				<div class="center">
					<div class="heart">💖</div>
					<h2 id="t3" class="big">ألف مبروك الزواج!<br>الآن أنتِ أصبحتِ زوجتي — أحبك ياعمري<p></p>
					<p class="muted">هذه رسالة احتفالية رمزية، أرسلي/أرسل الصفحة للي تحبينه 🤍<p>
					<div class="actions" style="max-width: 420px; margin: 0 auto;">
						<button id="replay">إعادة التجربة</button>
						<button id="share">مشاركة الرابط</button>
					</div>
				</div>
				<div class="confetti" id="confetti" aria-hidden="true"></div>
			</section>

		</div>
	</div>

	<script>
		// Helpers to switch sections
		const s1 = document.getElementById('s1');
		const s2 = document.getElementById('s2');
		const s3 = document.getElementById('s3');

		const agree = document.getElementById('agree');
		const agreeBtn = document.getElementById('agreeBtn');

		agree.addEventListener('change', () => {
			agreeBtn.disabled = !agree.checked;
			agreeBtn.setAttribute('aria-disabled', String(!agree.checked));
		});

		agreeBtn.addEventListener('click', () => {
			s1.classList.remove('active');
			s2.classList.add('active');
		});

		// Fingerprint logic (press & hold for 2 seconds)
		const fpArea = document.getElementById('fpArea');
		const ring = document.getElementById('ring');
		const scanner = document.getElementById('scanner');
		const altBtn = document.getElementById('altBtn');

		let timer = null, startTime = 0, progress = 0, rafId = null;
		const holdMs = 2000;

		function startHold() {
			if (timer) return;
			startTime = performance.now();
			progress = 0;
			step();
			timer = setTimeout(done, holdMs);
			scanner.style.setProperty('--y', '8%');
		}

		function cancelHold() {
			if (!timer) return;
			clearTimeout(timer); timer = null;
			progress = 0; ring.style.setProperty('--p', '0%');
			scanner.style.setProperty('--y', '-8%');
			if (rafId) cancelAnimationFrame(rafId);
		}

		function step(now) {
			if (!timer) return;
			const elapsed = performance.now() - startTime;
			progress = Math.min(1, elapsed / holdMs);
			ring.style.setProperty('--p', (progress * 100).toFixed(1) + '%');
			rafId = requestAnimationFrame(step);
		}

		function done() {
			timer = null;
			ring.style.setProperty('--p', '100%');
			scanner.style.setProperty('--y', '86%');
			setTimeout(() => {
				s2.classList.remove('active');
				s3.classList.add('active');
				launchConfetti();
			}, 400);
		}

		// Pointer events (work for mouse + touch)
		fpArea.addEventListener('pointerdown', (e) => { e.preventDefault(); startHold(); });
		fpArea.addEventListener('pointerup', cancelHold);
		fpArea.addEventListener('pointercancel', cancelHold);
		fpArea.addEventListener('pointerleave', cancelHold);

		// Keyboard accessibility
		fpArea.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { startHold(); } });
		fpArea.addEventListener('keyup', (e) => { if (e.key === 'Enter' || e.key === ' ') { cancelHold(); } });

		// Alt button (for devices with tricky touch)
		altBtn.addEventListener('click', () => {
			ring.style.setProperty('--p', '100%');
			setTimeout(done, 500);
		});

		// Replay & Share
		document.getElementById('replay').addEventListener('click', () => {
			s3.classList.remove('active');
			s1.classList.add('active');
			ring.style.setProperty('--p', '0%');
			scanner.style.setProperty('--y', '-8%');
			agree.checked = false;
			agree.dispatchEvent(new Event('change'));
		});

		document.getElementById('share').addEventListener('click', async () => {
			const shareData = { title: document.title, text: 'رسالة تهنئة الزواج اللطيفة ♥', url: location.href };
			try {
				if (navigator.share) await navigator.share(shareData);
				else {
					await navigator.clipboard.writeText(location.href);
					alert('تم نسخ الرابط!');
				}
			} catch (e) { /* ignore */ }
		});

		// Simple confetti
		function launchConfetti() {
			const box = document.getElementById('confetti');
			box.innerHTML = '';
			const colors = ['#22d3ee', '#a78bfa', '#34d399', '#f472b6', '#facc15', '#60a5fa'];
			const N = 90;
			for (let i = 0; i < N; i++) {
				const p = document.createElement('div');
				p.className = 'piece';
				p.style.left = Math.random() * 100 + 'vw';
				p.style.top = '-10vh';
				p.style.background = colors[(Math.random() * colors.length) | 0];
				p.style.transform = `translateY(0)`;
				p.style.animation = `fall ${3 + Math.random() * 2}s cubic-bezier(.2,.7,.2,1) ${Math.random()}s forwards`;
				p.style.rotate = (Math.random() * 360) + 'deg';
				box.appendChild(p);
			}
		}

		const style = document.createElement('style');
		style.textContent = `@keyframes fall { to { transform: translateY(120vh) rotate(720deg); opacity: .9; } }`;
		document.head.appendChild(style);
	</script>
</body>

</html>